const ProtoBufJs = require("protobufjs");
const root = ProtoBufJs.loadSync("../experiments/yang.proto"); // 路径要填对

// play_info 填上你的 然后node playInfoDecode.js 就可以得到答题步骤
let play_info = "CAYiBQjsARAHIggI6wEQBxj0AyIICOoBEAcYlgQiGQiY+P////////8BEJj4/////////wEYlAQiCAjpARAPGIAEIggI6AEQAxj/AyIICOcBEBAY9wMiCAjmARALGKQEIggI5QEQCBj7AyIICOQBEAgYpQQiBwg1EAgYjgQiGQiY+P////////8BEJj4/////////wEYoQQiCAjjARAMGPsDIggI4QEQDBiEBCIICNIBEAwY+wMiGQiY+P////////8BEJj4/////////wEYowQiCAjiARACGKQEIggI2gEQDxiXBCIICLcBEA8YmQQiGQiY+P////////8BEJj4/////////wEYoAQiCAjgARAFGJMEIggI2AEQAhj0AyIICMUBEAIYhgQiGQiY+P////////8BEJj4/////////wEY+AMiCAjfARAOGIAEIggI3AEQDhj0AyIICLwBEA4YkQQiGQiY+P////////8BEJj4/////////wEYmQQiCAjeARABGI0EIggI2QEQARiJBCIICL8BEAEYpQQiGQiY+P////////8BEJj4/////////wEY9QMiCAjdARAGGP0DIggI1wEQEBj1AyIICL4BEBAYmwQiGQiY+P////////8BEJj4/////////wEYiAQiCAjbARADGJMEIggI1gEQChiEBCIICMMBEAMYkQQiGQiY+P////////8BEJj4/////////wEYnQQiCAjVARAHGPkDIggIxAEQCxiTBCIICLgBEAsYigQiGQiY+P////////8BEJj4/////////wEY/gMiCAjUARAEGKEEIggI0AEQBBj2AyIICLoBEAQYjAQiGQiY+P////////8BEJj4/////////wEYiwQiCAjTARAJGI8EIggIzAEQBxiTBCIICMgBEAcYkAQiGQiY+P////////8BEJj4/////////wEYjwQiCAjRARACGPwDIggIzwEQAhiRBCIHCHAQAhieBCIZCJj4/////////wEQmPj/////////ARj+AyIICM4BEAEYggQiCAjLARABGP4DIggItgEQARj9AyIZCJj4/////////wEQmPj/////////ARiQBCIICM0BEA8Y9gMiCAjKARAFGKUEIggIrwEQBRiPBCIZCJj4/////////wEQmPj/////////ARihBCIICMkBEAwYjgQiCAjHARAPGP8DIgcIMhAPGJQEIhkImPj/////////ARCY+P////////8BGIwEIggIxgEQChigBCIICMIBEAoYkQQiGQiY+P////////8BEJj4/////////wEYkAQiCAjBARAJGP8DIggIwAEQChiEBCIICL0BEBAY/AMiBwhmEAkYnwQiGQiY+P////////8BEJj4/////////wEY/QMiCAi7ARAHGI8EIggItAEQBhiZBCIICKkBEAYYggQiGQiY+P////////8BEJj4/////////wEYgAQiCAi5ARAKGPQDIggIswEQDBigBCIICLABEAwYjwQiGQiY+P////////8BEJj4/////////wEYggQiCAi1ARAIGJ8EIggIqgEQBxiYBCIICKUBEAcYpAQiGQiY+P////////8BEJj4/////////wEYgAQiCAiyARAEGPwDIggIqAEQBBj3AyIHCCQQBBiEBCIZCJj4/////////wEQmPj/////////ARiSBCIICLEBEAMYmgQiCAisARADGIEEIgcIJhADGPwDIhkImPj/////////ARCY+P////////8BGPkDIggIrgEQAhiGBCIICKMBEAgY/QMiBwgzEAgYnAQiGQiY+P////////8BEJj4/////////wEY9QMiCAitARACGIYEIggIqwEQCRj7AyIHCDQQAhiABCIZCJj4/////////wEQmPj/////////ARiLBCIICKcBEAEYiwQiCAikARAJGJ8EIgcIJRAJGP4DIhkImPj/////////ARCY+P////////8BGJIEIggIpgEQBhibBCIICKEBEAYYoAQiCAibARAGGIwEIhkImPj/////////ARCY+P////////8BGJYEIggIogEQDhiGBCIICJ8BEBAYjwQiBwhxEBAY9QMiGQiY+P////////8BEJj4/////////wEY+wMiBwhnEAwYnQQiBwhhEA4YmQQiBwgrEA4YlAQiGQiY+P////////8BEJj4/////////wEY+QMiCAigARALGJ4EIggInQEQARidBCIICJoBEAEY9QMiGQiY+P////////8BEJj4/////////wEYpAQiCAicARADGPgDIggImAEQDBj0AyIICI8BEAoYkAQiGQiY+P////////8BEJj4/////////wEYiQQiCAieARAJGKYEIggImQEQBRifBCIHCCkQDBiTBCIZCJj4/////////wEQmPj/////////ARiDBCIICJcBEAcYjwQiBwhgEAUYhQQiBwhWEAUY+QMiGQiY+P////////8BEJj4/////////wEY+AMiCAiWARAQGKUEIgcIKBALGPUDIgcIGRALGI4EIhkImPj/////////ARCY+P////////8BGPcDIggIlQEQBhj6AyIICJEBEAYYmQQiBwgqEAYYkAQiGQiY+P////////8BEJj4/////////wEYjQQiCAiUARAOGKYEIggIkwEQDhj7AyIICJIBEA4YpAQiGQiY+P////////8BEJj4/////////wEYjAQiCAiQARAQGPcDIgcIGBAFGPUDIgcIDhAQGJoEIhkImPj/////////ARCY+P////////8BGKMEIgcIUBAPGPUDIgcIDxAPGJEEIgcIDRAPGIsEIhkImPj/////////ARCY+P////////8BGPcDIggIiwEQBBiABCIHCFcQBBiHBCIHCAwQBBiFBCIZCJj4/////////wEQmPj/////////ARijBCIICIYBEAUYnAQiBwhREAUY+AMiGQiY+P////////8BEJj4/////////wEYogQiBwhHEAgY+wMiBwgnEAcY9QMiBwgXEAgYiQQiCAiKARAIGPUDIhkImPj/////////ARCY+P////////8BGPsDIggIjAEQAxiDBCIICIkBEA8YmQQiCAiDARAHGKUEIhkImPj/////////ARCY+P////////8BGI8EIggIiAEQDxihBCIHCEEQCxj0AyIHCBYQDxj8AyIZCJj4/////////wEQmPj/////////ARj2AyIHCDcQBRiPBCIHCC0QCRiHBCIHCBsQAxiDBCIZCJj4/////////wEQmPj/////////ARiLBCIICI4BEAIY/AMiCAiNARAJGP0DIhkImPj/////////ARCY+P////////8BGP0DIggIhwEQBhicBCIICIUBEAoYjAQiCAiBARALGIUEIgcICxALGPQDIhkImPj/////////ARCY+P////////8BGJQEIgcIfxAIGIgEIgcIfRACGJwEIgcIfBACGJgEIhkImPj/////////ARCY+P////////8BGJ0EIggIhAEQDBiCBCIICIIBEAYYlQQiBwhGEAYYoAQiGQiY+P////////8BEJj4/////////wEYjgQiCAiAARAOGJ4EIgcIehAKGKMEIgcIQBAKGJ0EIhkImPj/////////ARCY+P////////8BGKEEIgcIfhABGIYEIgcIeBAFGPsDIgcIdBAFGIwEIhkImPj/////////ARCY+P////////8BGJcEIgcIexAIGIgEIgcIChAOGPQDIgcICRAOGIwEIhkImPj/////////ARCY+P////////8BGKAEIgcIdhAKGIUEIgcIdRAKGIYEIgcIahAKGP4DIhkImPj/////////ARCY+P////////8BGPQDIgcIeRAPGPUDIgcIdxAPGIEEIgcIcxACGKUEIhgI/P//////////ARD8//////////8BGDAiBwhyEAEYhwQiBwhvEAwY+AMiBwhuEA8YgwQiGQiY+P////////8BEJj4/////////wEY+gMiBwhtEAgYiAQiBwhsEAMYlwQiBwhkEAEY9wMiGQiY+P////////8BEJj4/////////wEYmQQiBwhrEAsYhgQiBwhlEAwYkwQiCAiEARAMGI8EIhkImPj/////////ARCY+P////////8BGPkDIgcIaRAEGJMEIgcIWxAIGIcEIgcIfxAIGPsDIhkImPj/////////ARCY+P////////8BGJAEIgcIYxAJGJIEIgcIWRAEGIcEIgcICBAEGIwEIhkImPj/////////ARCY+P////////8BGJsEIgcIaBAHGKMEIgcIYhAJGPcDIgcIXBAJGIoEIhkImPj/////////ARCY+P////////8BGIAEIhgI////////////ARD///////////8BGCQiBwhfEA4YmgQiBwhdEAEYiwQiBwhUEAYYlQQiBwhJEAIYjAQiBwgREAIYlwQiBwhzEAIYjQQiGQiY+P////////8BEJj4/////////wEYogQiBwhaEAMYhQQiBwhIEAMY+wMiBwhsEAMYiAQiGQiY+P////////8BEJj4/////////wEYowQiBwheEAgY+QMiBwhYEAcYpAQiBwhTEAcYhwQiGQiY+P////////8BEJj4/////////wEYlgQiBwhVEAsY+QMiBwhSEAgYhwQiBwhPEAgYggQiGQiY+P////////8BEJj4/////////wEYngQiBwhOEAUYhgQiBwhLEAUYnQQiBwhEEAUY/AMiGQiY+P////////8BEJj4/////////wEYjgQiBwg+EAsYhgQiBwg2EBAYhgQiBwgsEAsYhQQiGQiY+P////////8BEJj4/////////wEYmAQiBwg/EAYYkgQiBwgvEBAYgAQiBwgaEBAYnQQiGQiY+P////////8BEJj4/////////wEYmQQiBwgQEAYYoAQiGQiY+P////////8BEJj4/////////wEYoQQiBwhMEAEYiQQiBwhKEAgY9gMiBwhCEAgYmgQiBwh7EAgYlQQiGQiY+P////////8BEJj4/////////wEY9QMiBwhFEAUY+QMiBwg7EA4YgAQiBwg5EAoYowQiFgj9//////////8BEP3//////////wEiBwg6EA4YlgQiGQiY+P////////8BEJj4/////////wEYngQiBwhNEAkYlQQiBwgxEAkYhQQiBwgeEAkY9QMiGQiY+P////////8BEJj4/////////wEY+QMiBwg4EAQYlAQiBwgwEAMYgQQiBwgiEAEYlwQiGQiY+P////////8BEJj4/////////wEYnAQiBwgjEAsYigQiBwggEAsY+gMiBwhrEAsY+AMiGQiY+P////////8BEJj4/////////wEY+gMiBwghEAoYogQiBwgUEAMYiwQiBRAKGJEEIhkImPj/////////ARCY+P////////8BGIgEIgcIARAFGKUEIgcIQxAEGP0DIgcIPBAFGJ0EIhkImPj/////////ARCY+P////////8BGIUEIgcIPRAQGI4EIgcILhAGGJIEIgcIHBADGJwEIhkImPj/////////ARCY+P////////8BGKAEIgcIHxAHGPQDIgcIExAGGI4EIgcIBxAGGJYEIhkImPj/////////ARCY+P////////8BGP4DIgcIHRAHGJkEIgcIEhAQGJMEIgcIBBAEGJ8EIhkImPj/////////ARCY+P////////8BGPgDIgcIFRAMGKEEIgcIAxAQGJoEIhkImPj/////////ARCY+P////////8BGJwEIgcIAhAHGPoDIhkImPj/////////ARCY+P////////8BGIoEIgcIBhAMGI8EIgcIBRAMGIgEIhkImPj/////////ARCY+P////////8BGJEE";
var base64_play_info = Buffer.from(play_info, 'base64');

const buff_reader = root.lookupType("yang.MatchPlayInfo"); // 解码模板
var buff_str = buff_reader.decode(base64_play_info);
var sum = 0;
for (let item of buff_str.stepInfoList) {
	sum += item.deltaTime;
}
console.log(sum);
// console.log(buff_str.stepInfoList[0]);
console.log(JSON.stringify(buff_str));

const buf = buff_reader.encode(buff_str).finish();
console.log(buf);
const b64 = Buffer.from(buf).toString("base64");
console.log(b64);